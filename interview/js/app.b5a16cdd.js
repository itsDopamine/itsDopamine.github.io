(function(){"use strict";var t={9785:function(t,e,a){var s=a(6369),i=function(){var t=this,e=t._self._c;return e("router-view")},r=[],n={},o=n,l=a(1001),c=(0,l.Z)(o,i,r,!1,null,null,null),u=c.exports,d=(a(4920),a(8848)),p=a(2631),h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login-page"},[e("van-nav-bar",{attrs:{title:"面经登录"}}),e("van-form",{on:{submit:t.onSubmit}},[e("van-field",{attrs:{name:"username",label:"用户名：",placeholder:"请输入用户名",rules:[{required:!0,message:"请输入用户名"},{pattern:/^\w{6,15}$/,message:"用户名6-15位"}]},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),e("van-field",{attrs:{type:"password",name:"password",label:"密码：",placeholder:"请输入密码",rules:[{required:!0,message:"请输入密码"},{pattern:/^\w{6,15}$/,message:"用户名6-15位"}]},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),e("div",{staticStyle:{margin:"16px"}},[e("van-button",{attrs:{block:"",type:"primary","native-type":"submit"}},[t._v("登录")])],1)],1),e("a",{staticClass:"link",attrs:{href:"#/register"}},[t._v("无账号？去注册")])],1)},m=[],v=(a(7658),a(4161));const g="interview-h5",f=t=>{localStorage.setItem(g,t)},b=()=>localStorage.getItem(g),_=()=>{localStorage.removeItem(g)},w=v.Z.create({baseURL:"http://interview-api-t.itheima.net",timeout:1e4});w.interceptors.request.use((t=>(b()&&(t.headers.Authorization=`Bearer ${b()}`),t)),(t=>Promise.reject(t))),w.interceptors.response.use((t=>t.data),(t=>(401===t.response.status&&(d.Z.fail("Token过期，请重新登录"),Ot.push("/login")),Promise.reject(t))));var k=w;const y=({username:t,password:e})=>k.post("/h5/user/login",{username:t,password:e}),Z=({username:t,password:e})=>k.post("/h5/user/register",{username:t,password:e}),x=()=>k.get("/h5/user/currentUser");var C={name:"login-page",data(){return{username:"",password:""}},methods:{async onSubmit(t){console.log("submit",t);try{const e=await y(t);f(e.data.token),this.$router.push("/"),this.$toast.success("登录成功")}catch(e){this.$toast.fail(e.response.data.message)}}}},$=C,L=(0,l.Z)($,h,m,!1,null,"6a125f16",null),P=L.exports,S=function(){var t=this,e=t._self._c;return e("div",{staticClass:"register-page"},[e("van-nav-bar",{attrs:{title:"面经注册"}}),e("van-form",{on:{submit:t.onSubmit}},[e("van-field",{attrs:{name:"username",label:"用户名：",placeholder:"请输入用户名",rules:[{required:!0,message:"请输入用户名"},{pattern:/^\w{6,15}$/,message:"用户名6-15位"}]},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),e("van-field",{attrs:{type:"password",name:"password",label:"密码：",placeholder:"请输入密码",rules:[{required:!0,message:"请输入密码"},{pattern:/^\w{6,15}$/,message:"用户名6-15位"}]},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),e("div",{staticStyle:{margin:"16px"}},[e("van-button",{attrs:{block:"",type:"primary","native-type":"submit"}},[t._v("注册")])],1)],1),e("a",{staticClass:"link",attrs:{href:"#/login"}},[t._v("有账号，去登录")])],1)},I=[],z={name:"register-page",data(){return{username:"",password:""}},methods:{async onSubmit(t){console.log("submit",t);try{const e=await Z(t);this.$router.push("/login"),this.$toast.success("注册成功"),console.log(e)}catch(e){this.$toast.fail(e.response.data.message)}}}},O=z,j=(0,l.Z)(O,S,I,!1,null,"c042b17e",null),A=j.exports,T=function(){var t=this,e=t._self._c;return e("div",{staticClass:"layout-page"},[e("router-view"),e("van-tabbar",{attrs:{route:""}},[e("van-tabbar-item",{attrs:{to:"/article",icon:"home-o"}},[t._v("面经")]),e("van-tabbar-item",{attrs:{to:"/collect",icon:"star-o"}},[t._v("收藏")]),e("van-tabbar-item",{attrs:{to:"/like",icon:"like-o"}},[t._v("喜欢")]),e("van-tabbar-item",{attrs:{to:"/user",icon:"user-o"}},[t._v("我的")])],1)],1)},F=[],q={name:"layout-page"},E=q,M=(0,l.Z)(E,T,F,!1,null,"3c732cb9",null),H=M.exports,U=function(){var t=this,e=t._self._c;return e("div",{staticClass:"detail-page"},[e("van-nav-bar",{attrs:{"left-text":"返回",fixed:"",title:"面经详细"},on:{"click-left":function(e){return t.$router.back()}}}),e("header",{staticClass:"header"},[e("h1",[t._v(t._s(t.article.stem))]),e("p",[t._v(" "+t._s(t.article.createdAt)+" | "+t._s(t.article.views)+" 浏览量 | "+t._s(t.article.likeCount)+" 点赞数 ")]),e("p",[e("img",{attrs:{src:t.article.avatar,alt:""}}),e("span",[t._v(t._s(t.article.creator))])])]),e("main",{staticClass:"body",domProps:{innerHTML:t._s(t.article.content)}}),e("div",{staticClass:"opt"},[e("van-icon",{class:{active:t.article.likeFlag},attrs:{name:"like-o"},on:{click:t.doLike}}),e("van-icon",{class:{active:t.article.collectFlag},attrs:{name:"star-o"},on:{click:t.doCollect}})],1)],1)},B=[];const D=({current:t,pageSize:e,sorter:a})=>k.get("/h5/interview/query",{params:{current:t,pageSize:e,sorter:a}}),R=t=>k.get("/h5/interview/show",{params:{id:t}}),G=t=>k.post("/h5/interview/opt",{id:t,optType:1}),J=t=>k.post("/h5/interview/opt",{id:t,optType:2}),K=({page:t,pageSize:e})=>k.get("/h5/interview/opt/list",{params:{page:t,pageSize:e,optType:2}}),N=({page:t,pageSize:e})=>k.get("/h5/interview/opt/list",{params:{page:t,pageSize:e,optType:1}});var Q={name:"detail-page",data(){return{article:{}}},methods:{async doLike(){await G(this.$route.params.id),this.article.likeFlag=!this.article.likeFlag,this.article.likeFlag?(this.article.likeCount++,this.$toast.success("喜欢成功")):(this.article.likeCount--,this.$toast.success("取消喜欢成功"))},async doCollect(){await J(this.$route.params.id),this.article.collectFlag=!this.article.collectFlag,this.article.collectFlag?this.$toast.success("收藏成功"):this.$toast.success("取消收藏成功")}},async created(){const t=await R(this.$route.params.id);this.article=t.data}},V=Q,W=(0,l.Z)(V,U,B,!1,null,"5fadbb7d",null),X=W.exports,Y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"article-page"},[e("nav",{staticClass:"my-nav van-hairline--bottom"},[e("a",{staticClass:"active",attrs:{href:"javascript:;"},on:{click:function(e){return t.doCheck(e,"weight_desc")}}},[t._v("推荐")]),e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.doCheck(e,"")}}},[t._v("最新")]),t._m(0)]),e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.articleList,(function(a){return e("ArticleItem",{key:a.id,attrs:{curItem:a},nativeOn:{click:function(e){return t.$router.push(`/detail/${a.id}`)}}})})),1)],1)},tt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"logo"},[e("img",{attrs:{src:a(6949),alt:""}})])}],et=function(){var t=this,e=t._self._c;return e("van-cell",{staticClass:"article-item",scopedSlots:t._u([{key:"title",fn:function(){return[e("div",{staticClass:"head"},[e("img",{attrs:{src:t.curItem.avatar,alt:""}}),e("div",{staticClass:"con"},[e("p",{staticClass:"title van-ellipsis"},[t._v(t._s(t.curItem.stem))]),e("p",{staticClass:"other"},[t._v(t._s(t.curItem.creator)+" | "+t._s(t.curItem.createdAt))])])])]},proxy:!0},{key:"label",fn:function(){return[e("div",{staticClass:"body van-multi-ellipsis--l2",domProps:{innerHTML:t._s(t.curItem.content)}}),e("div",{staticClass:"foot"},[t._v(" 点赞 "+t._s(t.curItem.likeCount)+" | 浏览 "+t._s(t.curItem.views)+" ")])]},proxy:!0}])})},at=[],st={name:"article-item",props:{curItem:Object},methods:{}},it=st,rt=(0,l.Z)(it,et,at,!1,null,"02fdb588",null),nt=rt.exports,ot={components:{ArticleItem:nt},name:"article-page",data(){return{current:1,pageSize:10,sorter:"weight_desc",articleList:[],loading:!1,finished:!1}},methods:{async onLoad(){const t=await D({current:this.current++,pageSize:this.pageSize,sorter:this.sorter});this.articleList.push(...t.data.rows),this.loading=!1,0===t.data.rows.length&&(this.finished=!0)},doCheck(t,e){t.target.parentElement.querySelectorAll("a").forEach((t=>{t.classList.contains("active")&&t.classList.remove("active")})),t.target.classList.add("active"),this.sorter=e,this.articleList=[],this.current=1,this.loading=!0,this.onLoad()},doDetail(t){console.log(t)}}},lt=ot,ct=(0,l.Z)(lt,Y,tt,!1,null,"c925b6f6",null),ut=ct.exports,dt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"article-page"},[e("van-nav-bar",{attrs:{title:"收藏列表",fixed:""}}),e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.articleList,(function(a){return e("ArticleItem",{key:a.id,attrs:{curItem:a},nativeOn:{click:function(e){return t.$router.push(`/detail/${a.id}`)}}})})),1)],1)},pt=[],ht={components:{ArticleItem:nt},name:"collect-page",data(){return{page:1,pageSize:10,articleList:[],loading:!1,finished:!1}},methods:{async onLoad(){const t=await K({page:this.page++,pageSize:this.pageSize});this.articleList.push(...t.data.rows),this.loading=!1,0===t.data.rows.length&&(this.finished=!0)}}},mt=ht,vt=(0,l.Z)(mt,dt,pt,!1,null,"786e57f3",null),gt=vt.exports,ft=function(){var t=this,e=t._self._c;return e("div",{staticClass:"article-page"},[e("van-nav-bar",{attrs:{title:"喜欢列表",fixed:""}}),e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.articleList,(function(a){return e("ArticleItem",{key:a.id,attrs:{curItem:a},nativeOn:{click:function(e){return t.$router.push(`/detail/${a.id}`)}}})})),1)],1)},bt=[],_t={components:{ArticleItem:nt},name:"collect-page",data(){return{page:1,pageSize:10,articleList:[],loading:!1,finished:!1}},methods:{async onLoad(){const t=await N({page:this.page++,pageSize:this.pageSize});this.articleList.push(...t.data.rows),this.loading=!1,0===t.data.rows.length&&(this.finished=!0)}}},wt=_t,kt=(0,l.Z)(wt,ft,bt,!1,null,"00c6a59e",null),yt=kt.exports,Zt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"user-page"},[e("div",{staticClass:"user"},[e("img",{attrs:{src:t.userInfo.avatar,alt:""}}),e("h3",[t._v(t._s(t.userInfo.name||"用户名"))])]),e("van-grid",{attrs:{clickable:"","column-num":3,border:!1}},[e("van-grid-item",{attrs:{icon:"clock-o",text:"历史记录",to:"/"}}),e("van-grid-item",{attrs:{icon:"bookmark-o",text:"我的收藏",to:"/collect"}}),e("van-grid-item",{attrs:{icon:"thumb-circle-o",text:"我的点赞",to:"/like"}})],1),e("van-cell-group",{staticClass:"mt20"},[e("van-cell",{attrs:{title:"推荐分享","is-link":""}}),e("van-cell",{attrs:{title:"意见反馈","is-link":""}}),e("van-cell",{attrs:{title:"关于我们","is-link":""}}),e("van-cell",{attrs:{title:"退出登录","is-link":""},on:{click:t.doLogout}})],1)],1)},xt=[],Ct={name:"user-page",data(){return{userInfo:{}}},methods:{doLogout(){this.$dialog.confirm({title:"退出登录",message:"您确定要退出登录吗?"}).then((()=>{_(),this.$router.push("/login")})).catch((()=>{}))}},async created(){const t=await x();this.userInfo=t.data}},$t=Ct,Lt=(0,l.Z)($t,Zt,xt,!1,null,"2a4dc10b",null),Pt=Lt.exports;s.ZP.use(p.ZP);const St=[{path:"/",redirect:"/layout"},{path:"/login",component:P},{path:"/register",component:A},{path:"/detail/:id",component:X},{path:"/layout",component:H,children:[{path:"/",redirect:"/article"},{path:"/article",component:ut},{path:"/collect",component:gt},{path:"/like",component:yt},{path:"/user",component:Pt}]}],It=new p.ZP({routes:St}),zt=["/login","/register"];It.beforeEach(((t,e,a)=>{b()||zt.includes(t.path)?a():(d.Z.fail("请先登录"),a("/login"))}));var Ot=It,jt=(a(8618),a(5705)),At=(a(2210),a(4159)),Tt=(a(2685),a(7165)),Ft=(a(4809),a(9858)),qt=(a(7983),a(3838)),Et=(a(2406),a(9864)),Mt=(a(9578),a(6631)),Ht=(a(3096),a(2628)),Ut=(a(4072),a(9245)),Bt=(a(289),a(3142)),Dt=(a(3970),a(140)),Rt=(a(3255),a(797)),Gt=(a(4391),a(4398));s.ZP.use(Gt.Z),s.ZP.use(Rt.Z),s.ZP.use(Dt.Z),s.ZP.use(Bt.Z),s.ZP.use(d.Z),s.ZP.use(Ut.Z),s.ZP.use(Ht.Z),s.ZP.use(Mt.Z),s.ZP.use(Et.Z),s.ZP.use(qt.Z),s.ZP.use(Ft.Z),s.ZP.use(Tt.Z),s.ZP.use(At.Z),s.ZP.use(jt.Z);a(3434);s.ZP.config.productionTip=!1,s.ZP.use("ArticleItem",nt),new s.ZP({router:Ot,render:t=>t(u)}).$mount("#app")},6949:function(t,e,a){t.exports=a.p+"img/logo.dbd40807.png"}},e={};function a(s){var i=e[s];if(void 0!==i)return i.exports;var r=e[s]={exports:{}};return t[s].call(r.exports,r,r.exports,a),r.exports}a.m=t,function(){var t=[];a.O=function(e,s,i,r){if(!s){var n=1/0;for(u=0;u<t.length;u++){s=t[u][0],i=t[u][1],r=t[u][2];for(var o=!0,l=0;l<s.length;l++)(!1&r||n>=r)&&Object.keys(a.O).every((function(t){return a.O[t](s[l])}))?s.splice(l--,1):(o=!1,r<n&&(n=r));if(o){t.splice(u--,1);var c=i();void 0!==c&&(e=c)}}return e}r=r||0;for(var u=t.length;u>0&&t[u-1][2]>r;u--)t[u]=t[u-1];t[u]=[s,i,r]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.p=""}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,s){var i,r,n=s[0],o=s[1],l=s[2],c=0;if(n.some((function(e){return 0!==t[e]}))){for(i in o)a.o(o,i)&&(a.m[i]=o[i]);if(l)var u=l(a)}for(e&&e(s);c<n.length;c++)r=n[c],a.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return a.O(u)},s=self["webpackChunkint_h5_01"]=self["webpackChunkint_h5_01"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(9785)}));s=a.O(s)})();
//# sourceMappingURL=app.b5a16cdd.js.map